{% extends "_base.html" %}
{% load crispy_forms_tags %}

{% block head_title %}Checkout{% endblock %}

{% block content %}
<main>
  <div class="container">
    <section class="mt-4 mb-5">
      <div class="container wow fadeIn">
        <h1 class="mb-4">Checkout</h1>
          <div class="row">
            <div class="col-md-8 mb-4">
              <div class="card">

                <form method="POST" class="card-body">
                  {% csrf_token %}

                  <!-- SHIPPING FORM -->
                  <h3 class="pb-2">Enter your shipping address:</h3>

                  {% if shipping_address %}
                    <div class="form-row pb-2">
                      <div class="form-group col-md-4 mb-0" name="use_default_shipping" class="custom-control-input" id="use_default_shipping">
                        {{ shipping_form.use_default|as_crispy_field }}
                      </div>
                      <div class="form-group col-md-8 mb-0">
                        <b>{{ shipping_address.street_address }}</b>
                      </div>
                    </div>
                  {% endif %}

                  <div>
                    {{ shipping_form.street_address|as_crispy_field }}
                    {{ shipping_form.apartment_address|as_crispy_field }}
                    <div class="form-row">
                      <div class="form-group col-md-4 mb-0">
                        {{ shipping_form.city|as_crispy_field }}
                      </div>
                      <div class="form-group col-md-6 mb-0">
                        {{ shipping_form.country|as_crispy_field }}
                      </div>
                      <div class="form-group col-md-2 mb-0">
                        {{ shipping_form.zip_code|as_crispy_field }}
                      </div>
                    </div>
                    {{ shipping_form.is_default|as_crispy_field }}
                  </div>
                  <!-- SHIPPING FORM -->

                  <hr class="mb-4">

                  <!-- BILLING FORM -->
                  <h3 class="pb-2">Enter your billing address:</h3>

                  {% if billing_address %}
                    <div class='pb-4'>
                      <div class="form-row">
                        <div class="form-group col-md-4 mb-0">
                          {{ billing_form.use_default|as_crispy_field }}
                        </div>
                        <div class="form-group col-md-8 mb-0">
                          <b>{{ billing_address.street_address }}</b>
                        </div>
                      </div>
                    </div>
                  {% endif %}

                  <div>
                    {{ billing_form.street_address|as_crispy_field }}
                    {{ billing_form.apartment_address|as_crispy_field }}
                    <div class="form-row">
                      <div class="form-group col-md-4 mb-0">
                        {{ billing_form.city|as_crispy_field }}
                      </div>
                      <div class="form-group col-md-6 mb-0">
                        {{ billing_form.country|as_crispy_field }}
                      </div>
                      <div class="form-group col-md-2 mb-0">
                        {{ billing_form.zip_code|as_crispy_field }}
                      </div>
                    </div>
                    {{ billing_form.is_default|as_crispy_field }}
                  </div>
                  <!-- BILLING FORM -->

                  <hr class="mb-4">

                  <button class="btn btn-primary btn-lg btn-block" type="submit">Continue to payment</button>
                </form>

              </div>
            </div>

            <div class="col-md-4 mb-4">
              <div class="col-md-12 mt-4 mb-4">

                {% include "order_snippet.html" %}
                {% include "coupon_form.html" %}

              </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>
{% endblock content %}
